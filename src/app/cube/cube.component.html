<main class="flex flex-col items-center">
  <div class="mb-4">
    <h2
      class="!mt-4 md:!mt-8 md:!mb-4 bg-green-700 !text-3xl !py-2 md:!text-5xl"
      [ngClass]="{
        'rotate-cube': isTimerActive(),
        'cube-2': type() === 2,
        'cube-3': type() === 3,
        'cube-4': type() === 4,
      }"
    >
      {{ type() }}x{{ type() }}
    </h2>
  </div>

  <p
    class="bg-white w-4/5 md:w-1/3 h-[450px] md:h-80 text-center border border-gray-500 rounded-lg text-9xl grid place-items-center"
    [ngClass]="{
      '!bg-grey-50 cursor-pointer animate-pulse border-4 border-yellow-300 !shadow-lg shadow-yellow-200':
        isTimerActive(),
    }"
    tabindex="0"
    (click)="this.isTimerActive.set(!this.isTimerActive())"
  >
    {{ truncateDecimals(time, 1) }}
  </p>

  <div class="mt-6 text-center md:text-lg text-gray-700 flex flex-col gap-2">
    <p class="flex items-center justify-center gap-2">
      <span class="font-semibold">Iniciar / Parar tempo</span>
      <span
        class="inline-flex items-center px-2 py-0.5 text-sm font-mono font-semibold rounded bg-gray-100 border border-gray-300 shadow-sm"
      >
        Espazo
      </span>
      <span class="text-gray-100 font-semibold">/</span>
      <span
        class="inline-flex items-center px-2 py-0.5 text-sm font-mono font-semibold rounded bg-gray-100 border border-gray-300 shadow-sm"
      >
        Click
      </span>
    </p>

    <p class="flex items-center justify-center gap-2">
      <span class="font-semibold">Rexistrar tempo</span>
      <span
        class="inline-flex items-center px-2 py-0.5 text-sm font-mono font-semibold rounded bg-gray-100 border border-gray-300 shadow-sm"
      >
        Enter
      </span>

      <span
        class="md:hidden inline-flex items-center px-2 py-0.5 text-sm font-mono rounded bg-gray-100 border border-gray-300 shadow-sm"
      >
        Botón
      </span>
    </p>
  </div>
</main>

<div
  class="flex flex-col-reverse md:flex-row justify-between items-start mx-6 mt-8 md:mt-4"
>
  <div
    [class.invisible]="!times.length"
    class="md:fixed bottom-2 left-4 bg-white bg-opacity-50 rounded shadow p-4 mb-4 max-h-[450px] overflow-y-auto"
  >
    <p class="md:text-lg"><strong>Tempos desta sesión:</strong></p>
    <ul>
      <li
        *ngFor="let time of times; let i = index"
        class="text-xl md:text-4xl my-4"
      >
        <span class="font-bold text-right">{{ i + 1 }}</span
        >. {{ time }}"
      </li>
    </ul>
  </div>

  <p
    class="md:fixed bottom-2 right-4 md:text-xl bg-white bg-opacity-50 rounded shadow p-4"
  >
    <strong>Media desta sesión</strong>: {{ truncateDecimals(avg()) }}"
  </p>
</div>

<div
  *ngIf="hasNewTime()"
  class="fixed bottom-4 md:hidden flex justify-center w-full"
>
  <button
    class="animate-bounce"
    (click)="scrollBottom()"
    mat-icon-button
    color="primary"
  >
    <mat-icon> expand_circle_down </mat-icon>
  </button>
</div>

<ng-container *ngIf="time && !isTimerActive()">
  <button
    (click)="saveTime()"
    class="!fixed bottom-2 right-2 md:!hidden"
    mat-fab
    color="primary"
    aria-label="save button"
  >
    <mat-icon>save</mat-icon>
  </button>
</ng-container>
